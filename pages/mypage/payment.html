<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회비 납부 - 한국ESG학회</title>
    <link rel="icon" type="image/png" href="../../images/logo.png">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/subpage.css">
    <style>
        .payment-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .payment-status-card {
            background: white;
            border: 3px solid #1e7e34;
            border-radius: 15px;
            padding: 40px;
            margin-top: 40px;
            margin-bottom: 40px;
            box-shadow: 0 4px 20px rgba(30, 126, 52, 0.15);
        }

        .status-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e8f5e9;
        }

        .status-title {
            font-size: 24px;
            font-weight: 700;
            color: #1e7e34;
        }

        .status-badge {
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            color: white;
        }

        .status-badge.paid {
            background: #27ae60;
        }

        .status-badge.unpaid {
            background: #e74c3c;
        }

        .status-info {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            background: #f8f9fa;
            padding: 30px;
            border-radius: 10px;
        }

        .status-item {
            text-align: center;
        }

        .status-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
            font-weight: 500;
        }

        .status-value {
            font-size: 28px;
            font-weight: 700;
            color: #1e7e34;
        }

        .payment-section {
            background: white;
            border-radius: 12px;
            padding: 35px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
            color: #333;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            color: #1e7e34;
        }

        .fee-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 25px;
        }

        .fee-table th,
        .fee-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }

        .fee-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #333;
        }

        .fee-table tr:hover {
            background: #f8f9fa;
        }

        .fee-amount {
            font-size: 18px;
            font-weight: 700;
            color: #1e7e34;
        }

        .payment-method-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .payment-method-card {
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .payment-method-card:hover {
            border-color: #1e7e34;
            background: #e8f5e9;
        }

        .payment-method-card.selected {
            border-color: #1e7e34;
            background: #e8f5e9;
        }

        .payment-method-icon {
            font-size: 40px;
            color: #1e7e34;
            margin-bottom: 15px;
        }

        .payment-method-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }

        .payment-method-desc {
            font-size: 13px;
            color: #666;
        }

        .payment-summary {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #dee2e6;
        }

        .summary-row:last-child {
            border-bottom: none;
            padding-top: 20px;
            margin-top: 10px;
            border-top: 2px solid #dee2e6;
        }

        .summary-label {
            font-weight: 500;
            color: #666;
        }

        .summary-value {
            font-weight: 600;
            color: #333;
        }

        .summary-total .summary-label,
        .summary-total .summary-value {
            font-size: 20px;
            font-weight: 700;
            color: #1e7e34;
        }

        .btn-payment {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 0;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4);
            letter-spacing: 0.5px;
        }

        .btn-payment:hover {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.5);
        }

        .btn-payment:disabled {
            background: linear-gradient(135deg, #d1d5db 0%, #9ca3af 100%);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-payment i {
            margin-right: 8px;
        }

        /* 모달 공통 스타일 */
        .payment-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 10000;
            overflow-y: auto;
            padding: 20px;
        }

        .payment-modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 0;
            max-width: 560px;
            width: 100%;
            max-height: 90vh;
            overflow: hidden;
            position: relative;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes checkmarkBounce {
            0% {
                opacity: 0;
                transform: scale(0);
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 30px 32px;
            background: linear-gradient(135deg, #1e7e34 0%, #27ae60 100%);
            border-bottom: none;
            position: relative;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 700;
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .modal-title i {
            color: white;
            font-size: 22px;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 40px;
            height: 40px;
            border: none;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            font-size: 22px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.3);
            color: white;
            transform: scale(1.1);
        }

        .modal-body {
            padding: 32px;
            max-height: calc(90vh - 160px);
            overflow-y: auto;
        }

        .modal-body::-webkit-scrollbar {
            width: 6px;
        }

        .modal-body::-webkit-scrollbar-thumb {
            background: #cbd5e0;
            border-radius: 3px;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 10px;
            font-size: 14px;
            letter-spacing: 0.3px;
        }

        .form-control {
            width: 100%;
            padding: 13px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 15px;
            transition: all 0.3s;
            background: white;
            color: #1f2937;
            font-weight: 500;
        }

        .form-control:focus {
            outline: none;
            border-color: #6366f1;
            background: white;
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
        }

        .form-control::placeholder {
            color: #9ca3af;
            font-weight: 400;
        }

        /* 신용카드 모달 스타일 */
        .card-visual {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #d946ef 100%);
            border-radius: 16px;
            padding: 28px 30px;
            color: white;
            margin-bottom: 30px;
            min-height: 200px;
            position: relative;
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.4);
            transition: transform 0.3s;
        }

        .card-visual:hover {
            transform: translateY(-3px);
        }

        .card-chip {
            width: 50px;
            height: 40px;
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .card-number-display {
            font-size: 20px;
            font-weight: 600;
            letter-spacing: 2px;
            margin-bottom: 18px;
            font-family: 'Courier New', monospace;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .card-info-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .card-holder-display {
            font-size: 12px;
            text-transform: uppercase;
            opacity: 0.95;
        }

        .card-expiry-display {
            font-size: 12px;
            opacity: 0.95;
        }

        .card-company {
            text-align: right;
            font-size: 16px;
            font-weight: 700;
        }

        .card-number-input {
            width: 23%;
            text-align: center;
            font-size: 15px;
            font-family: 'Courier New', monospace;
        }

        .installment-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }

        .installment-option {
            padding: 12px 10px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            background: white;
            font-weight: 600;
            color: #6b7280;
        }

        .installment-option:hover {
            border-color: #6366f1;
            background: linear-gradient(135deg, #eef2ff 0%, #e0e7ff 100%);
            color: #4f46e5;
            transform: translateY(-1px);
        }

        .installment-option.selected {
            border-color: #6366f1;
            background: linear-gradient(135deg, #eef2ff 0%, #e0e7ff 100%);
            font-weight: 700;
            color: #4f46e5;
            box-shadow: 0 2px 8px rgba(99, 102, 241, 0.2);
        }

        /* 계좌이체 모달 스타일 */
        .bank-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .bank-option {
            padding: 16px 12px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
        }

        .bank-option:hover {
            border-color: #6366f1;
            background: linear-gradient(135deg, #eef2ff 0%, #e0e7ff 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2);
        }

        .bank-option.selected {
            border-color: #6366f1;
            background: linear-gradient(135deg, #eef2ff 0%, #e0e7ff 100%);
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }

        .bank-logo {
            font-size: 26px;
            margin-bottom: 6px;
        }

        .bank-name {
            font-weight: 600;
            color: #333;
            font-size: 12px;
        }
        }

        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2874a6;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .info-box i {
            color: #2874a6;
            margin-right: 10px;
        }

        /* CMS 모달 스타일 */
        .cms-info-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .cms-benefit {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 0;
        }

        .cms-benefit i {
            color: #1e7e34;
            font-size: 18px;
        }

        .withdrawal-date-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .date-option {
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 7px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 12px;
        }

        .date-option:hover {
            border-color: #1e7e34;
            background: #e8f5e9;
        }

        .date-option.selected {
            border-color: #1e7e34;
            background: #e8f5e9;
            font-weight: 600;
        }

        /* 반응형 */
        @media (max-width: 768px) {
            .status-info {
                grid-template-columns: 1fr;
            }

            .payment-method-grid {
                grid-template-columns: 1fr;
            }

            .bank-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .installment-grid,
            .withdrawal-date-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .modal-content {
                padding: 25px;
            }
        }
    </style>
    <link rel="stylesheet" href="../../css/modal.css">
</head>
<body>
    <!-- 헤더 -->
    <header class="header">
        <nav class="navbar">
            <div class="container">
                <div class="nav-wrapper">
                    <a href="../../index.html" class="logo">
                        <img src="../../images/logo.png" alt="한국ESG학회" class="logo-img">
                    </a>
                    
                    <button class="mobile-menu-btn" aria-label="메뉴 열기">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                    
                    <ul class="nav-menu">
                        <li class="nav-item has-dropdown">
                            <a href="#" class="nav-link"><i class="fas fa-building"></i> 학회소개</a>
                            <ul class="dropdown-menu">
                                <li><a href="../about/greeting.html">학회장 인사말</a></li>
                                <li><a href="../about/purpose.html">설립 목적·비전</a></li>
                                <li><a href="../about/history.html">연혁</a></li>
                                <li><a href="../about/constitution.html">정관·규정</a></li>
                                <li><a href="../about/ci.html">CI·BI</a></li>
                                <li><a href="../about/location.html">오시는 길</a></li>
                                <li><a href="../sitemap.html">웹 둘러보기</a></li>
                            </ul>
                        </li>
                        
                        <li class="nav-item has-dropdown">
                            <a href="#" class="nav-link"><i class="fas fa-users"></i> 학회조직</a>
                            <ul class="dropdown-menu">
                                <li><a href="../organization/executives.html">임원진</a></li>
                                <li><a href="../organization/committees.html">위원회</a></li>
                                <li><a href="../organization/divisions.html">분과학회·연구회</a></li>
                            </ul>
                        </li>
                        
                        <li class="nav-item has-dropdown">
                            <a href="#" class="nav-link"><i class="fas fa-user-check"></i> 회원안내</a>
                            <ul class="dropdown-menu">
                                <li><a href="../member/types.html">회원 구분</a></li>
                                <li><a href="../member/process.html">가입 절차</a></li>
                                <li><a href="../member/fee.html">회비 안내</a></li>
                                <li><a href="../member/benefits.html">회원 혜택</a></li>
                                <li><a href="../member/companies.html">회원사 소개</a></li>
                            </ul>
                        </li>
                        
                        <li class="nav-item has-dropdown">
                            <a href="#" class="nav-link"><i class="fas fa-briefcase"></i> 핵심사업</a>
                            <ul class="dropdown-menu">
                                <li><a href="../core/forum.html">월드ESG포럼</a></li>
                                <li><a href="../core/award.html">한국ESG대상</a></li>
                                <li><a href="../core/ordinance.html">한국ESG조례대상</a></li>
                                <li><a href="../core/seminar.html">월요학술세미나</a></li>
                            </ul>
                        </li>
                        
                        <li class="nav-item has-dropdown">
                            <a href="#" class="nav-link"><i class="fas fa-book"></i> 학술지·논문</a>
                            <ul class="dropdown-menu">
                                <li><a href="../journal/about.html">학술지 소개</a></li>
                                <li><a href="../journal/submission.html">논문 투고 안내</a></li>
                                <li><a href="../journal/editorial.html">편집위원회</a></li>
                                <li><a href="../journal/review.html">심사 규정</a></li>
                                <li><a href="../journal/archive.html">논문 아카이브</a></li>
                                <li><a href="../journal/dbpia-embed.html">DBPIA 논문 검색</a></li>
                            </ul>
                        </li>
                        
                        <li class="nav-item has-dropdown">
                            <a href="#" class="nav-link"><i class="fas fa-chart-line"></i> ESG정책·연구</a>
                            <ul class="dropdown-menu">
                                <li><a href="../policy/research.html">ESG 정책 연구</a></li>
                                <li><a href="../policy/standards.html">ESG 지표·표준</a></li>
                                <li><a href="../policy/law.html">법·제도 분석</a></li>
                                <li><a href="../policy/global.html">국제 ESG 동향</a></li>
                                <li><a href="../policy/reports.html">연구보고서</a></li>
                            </ul>
                        </li>
                        
                        <li class="nav-item has-dropdown">
                            <a href="#" class="nav-link"><i class="fas fa-newspaper"></i> ESG뉴스</a>
                            <ul class="dropdown-menu">
                                <li><a href="../news/main.html">ESG 주요 뉴스</a></li>
                                <li><a href="../news/policy.html">정책·입법 동향</a></li>
                                <li><a href="../news/cases.html">기업 ESG 사례</a></li>
                                <li><a href="../news/press.html">학회 보도자료</a></li>
                                <li><a href="../news/column.html">기고·칼럼</a></li>
                                <li><a href="../news/video.html">영상 콘텐츠</a></li>
                                <li><a href="../news/esg-news-embed.html">코리아ESG뉴스</a></li>
                            </ul>
                        </li>
                        
                        <li class="nav-item has-dropdown">
                            <a href="#" class="nav-link"><i class="fas fa-comments"></i> 커뮤니티</a>
                            <ul class="dropdown-menu">
                                <li><a href="../community/notice.html">공지사항</a></li>
                                <li><a href="../community/free-board.html">자유게시판</a></li>
                                <li><a href="../community/forum.html">학술·정책 토론</a></li>
                                <li><a href="../community/member-news.html">회원 소식</a></li>
                                <li><a href="../community/qna.html">Q&A</a></li>
                            </ul>
                        </li>
                        
                        <li class="nav-item has-dropdown">
                            <a href="#" class="nav-link"><i class="fas fa-folder-open"></i> 자료실</a>
                            <ul class="dropdown-menu">
                                <li><a href="../materials/academic.html">학술자료</a></li>
                                <li><a href="../materials/policy.html">정책자료</a></li>
                                <li><a href="../materials/presentation.html">발표자료</a></li>
                                <li><a href="../materials/report.html">보고서</a></li>
                                <li><a href="../materials/video.html">영상자료</a></li>
                            </ul>
                        </li>
                        
                        <li class="nav-item has-dropdown">
                            <a href="#" class="nav-link"><i class="fas fa-hand-holding-heart"></i> 후원·기부</a>
                            <ul class="dropdown-menu">
                                <li><a href="../support/guide.html">후원 안내</a></li>
                                <li><a href="../support/personal.html">개인 후원</a></li>
                                <li><a href="../support/corporate.html">기업 후원</a></li>
                                <li><a href="../support/usage.html">후원금 사용 내역</a></li>
                            </ul>
                        </li>
                        
                        <!-- 로그인 상태별 메뉴 -->
                        <li class="nav-item has-dropdown user-status-logged-out">
                            <a href="../auth/login.html" class="nav-link nav-link-auth-login">
                                <i class="fas fa-sign-in-alt"></i> 로그인
                            </a>
                        </li>
                        
                        <li class="nav-item has-dropdown user-status-logged-in" style="display: none;">
                            <a href="#" class="nav-link nav-link-auth">
                                <i class="fas fa-user-circle"></i> 
                                <span class="user-name-display">홍길동</span>님
                            </a>
                            <ul class="dropdown-menu">
                                <li><a href="profile.html"><i class="fas fa-user-edit"></i> 회원정보 수정</a></li>
                                <li><a href="history.html"><i class="fas fa-history"></i> 활동내역</a></li>
                                <li><a href="paper.html"><i class="fas fa-file-alt"></i> 나의 논문</a></li>
                                <li><a href="event.html"><i class="fas fa-calendar-check"></i> 참여 행사</a></li>
                                <li><a href="payment.html"><i class="fas fa-won-sign"></i> 회비 납부</a></li>
                                <li><a href="certificate.html"><i class="fas fa-certificate"></i> 증명서 발급</a></li>
                                <li class="dropdown-divider"></li>
                                <li><a href="#" onclick="logout(); return false;"><i class="fas fa-sign-out-alt"></i> 로그아웃</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <main class="main-content">
        <div class="page-header">
            <h1><i class="fas fa-won-sign"></i> 회비 납부</h1>
            <p>한국ESG학회 회비 납부 및 후원금 결제</p>
        </div>

        <div class="payment-container">
            <!-- 납부 현황 카드 -->
            <div class="payment-status-card">
                <div class="status-header">
                    <div class="status-title">2025년 회비 납부 현황</div>
                    <div class="status-badge unpaid">미납</div>
                </div>
                
                <div class="status-info">
                    <div class="status-item">
                        <div class="status-label">정회원 연회비</div>
                        <div class="status-value">100,000원</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">납부 기한</div>
                        <div class="status-value">2025.03.31</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">회원 등급</div>
                        <div class="status-value">정회원</div>
                    </div>
                </div>
            </div>

            <!-- 납부 항목 선택 -->
            <div class="payment-section">
                <h2 class="section-title">
                    <i class="fas fa-list-check"></i>
                    납부 항목 선택
                </h2>

                <table class="fee-table">
                    <thead>
                        <tr>
                            <th>항목</th>
                            <th>금액</th>
                            <th>기한</th>
                            <th>선택</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <strong>연회비 (정회원)</strong>
                                <div style="font-size: 13px; color: #666; margin-top: 5px;">
                                    2025년 학회 연회비
                                </div>
                            </td>
                            <td class="fee-amount">100,000원</td>
                            <td>2025.03.31</td>
                            <td>
                                <input type="radio" name="paymentType" value="annual" checked onchange="updatePaymentAmount()">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <strong>추가 후원금</strong>
                                <div style="font-size: 13px; color: #666; margin-top: 5px;">
                                    학회 발전을 위한 후원
                                </div>
                            </td>
                            <td>
                                <input type="number" class="form-control" id="donationAmount" placeholder="금액 입력" min="10000" step="10000" style="width: 150px;">
                            </td>
                            <td>-</td>
                            <td>
                                <input type="checkbox" id="includeDonation" onchange="updatePaymentAmount()">
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- 결제 수단 선택 -->
            <div class="payment-section">
                <h2 class="section-title">
                    <i class="fas fa-wallet"></i>
                    결제 수단 선택
                </h2>

                <div class="payment-method-grid">
                    <div class="payment-method-card" onclick="openPaymentModal('card')">
                        <div class="payment-method-icon">
                            <i class="fas fa-credit-card"></i>
                        </div>
                        <div class="payment-method-name">신용카드</div>
                        <div class="payment-method-desc">즉시 결제</div>
                    </div>
                    
                    <div class="payment-method-card" onclick="openPaymentModal('transfer')">
                        <div class="payment-method-icon">
                            <i class="fas fa-university"></i>
                        </div>
                        <div class="payment-method-name">계좌이체</div>
                        <div class="payment-method-desc">실시간 이체</div>
                    </div>
                    
                    <div class="payment-method-card" onclick="openPaymentModal('cms')">
                        <div class="payment-method-icon">
                            <i class="fas fa-sync-alt"></i>
                        </div>
                        <div class="payment-method-name">CMS 자동이체</div>
                        <div class="payment-method-desc">자동 납부</div>
                    </div>
                </div>
            </div>

            <!-- 결제 금액 요약 -->
            <div class="payment-section">
                <h2 class="section-title">
                    <i class="fas fa-calculator"></i>
                    결제 금액
                </h2>

                <div class="payment-summary">
                    <div class="summary-row">
                        <div class="summary-label">연회비</div>
                        <div class="summary-value" id="annualFee">100,000원</div>
                    </div>
                    <div class="summary-row">
                        <div class="summary-label">추가 후원금</div>
                        <div class="summary-value" id="donationFee">0원</div>
                    </div>
                    <div class="summary-row summary-total">
                        <div class="summary-label">총 결제 금액</div>
                        <div class="summary-value" id="totalAmount">100,000원</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- 신용카드 결제 모달 -->
    <div class="payment-modal" id="cardModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fas fa-credit-card"></i>
                    신용카드 결제
                </div>
                <button class="modal-close" onclick="closePaymentModal('card')">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="modal-body">
                <div class="card-visual">
                    <div class="card-chip"></div>
                    <div class="card-number-display" id="cardNumberDisplay">•••• •••• •••• ••••</div>
                    <div class="card-info-row">
                        <div class="card-holder-display" id="cardHolderDisplay">CARD HOLDER</div>
                        <div class="card-expiry-display" id="cardExpiryDisplay">MM/YY</div>
                    </div>
                    <div class="card-company" id="cardCompanyDisplay" style="font-size: 12px; text-align: right; opacity: 0.9;">CARD</div>
                </div>

                <div class="form-group">
                    <label class="form-label">카드번호</label>
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px;">
                        <input type="text" class="form-control card-number-input" id="cardNum1" maxlength="4" placeholder="1234" oninput="formatCardNumber(1)">
                        <input type="text" class="form-control card-number-input" id="cardNum2" maxlength="4" placeholder="5678" oninput="formatCardNumber(2)">
                        <input type="text" class="form-control card-number-input" id="cardNum3" maxlength="4" placeholder="9012" oninput="formatCardNumber(3)">
                        <input type="text" class="form-control card-number-input" id="cardNum4" maxlength="4" placeholder="3456" oninput="formatCardNumber(4)">
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                    <div class="form-group">
                        <label class="form-label">유효기간</label>
                        <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 8px; align-items: center;">
                            <input type="text" class="form-control" id="cardMonth" maxlength="2" placeholder="12" oninput="formatExpiry()">
                            <span style="font-weight: 600; color: #999;">/</span>
                            <input type="text" class="form-control" id="cardYear" maxlength="2" placeholder="25" oninput="formatExpiry()">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">CVC/CVV</label>
                        <input type="text" class="form-control" id="cardCvc" maxlength="3" placeholder="123">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">카드 소유자 이름</label>
                    <input type="text" class="form-control" id="cardHolder" placeholder="홍길동" oninput="updateCardHolder()">
                </div>

                <div class="form-group">
                    <label class="form-label">카드사 선택</label>
                    <select class="form-control" id="cardCompany" onchange="updateCardCompany()">
                        <option value="">카드사를 선택하세요</option>
                        <option value="신한카드">신한카드</option>
                        <option value="KB국민카드">KB국민카드</option>
                        <option value="삼성카드">삼성카드</option>
                        <option value="현대카드">현대카드</option>
                        <option value="우리카드">우리카드</option>
                        <option value="NH농협카드">NH농협카드</option>
                        <option value="BC카드">BC카드</option>
                        <option value="롯데카드">롯데카드</option>
                        <option value="씨티카드">씨티카드</option>
                    </select>
                </div>

                <div class="form-group" style="margin-bottom: 0;">
                    <label class="form-label">할부 개월</label>
                    <div class="installment-grid">
                        <div class="installment-option selected" onclick="selectInstallment(0)">일시불</div>
                        <div class="installment-option" onclick="selectInstallment(2)">2개월</div>
                        <div class="installment-option" onclick="selectInstallment(3)">3개월</div>
                        <div class="installment-option" onclick="selectInstallment(6)">6개월</div>
                        <div class="installment-option" onclick="selectInstallment(10)">10개월</div>
                        <div class="installment-option" onclick="selectInstallment(12)">12개월</div>
                    </div>
                </div>
            </div>

            <div style="padding: 28px 32px; background: linear-gradient(180deg, #f8f9fa 0%, #ffffff 100%); border-top: 1px solid #e9ecef;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding: 16px; background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                    <span style="font-size: 15px; color: #6b7280; font-weight: 600;">결제 금액</span>
                    <strong style="font-size: 24px; color: #6366f1; font-weight: 700;" id="cardPaymentAmount">100,000원</strong>
                </div>
                <button class="btn-payment" onclick="processCardPayment()">
                    <i class="fas fa-lock"></i> 안전하게 결제하기
                </button>
            </div>
        </div>
    </div>

    <!-- 계좌이체 모달 -->
    <div class="payment-modal" id="transferModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fas fa-university"></i>
                    실시간 계좌이체
                </div>
                <button class="modal-close" onclick="closePaymentModal('transfer')">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="modal-body">
                <div style="background: linear-gradient(135deg, #e0e7ff 0%, #f3e8ff 100%); padding: 20px; border-radius: 12px; margin-bottom: 24px; border-left: 4px solid #6366f1; box-shadow: 0 2px 10px rgba(99, 102, 241, 0.1);">
                    <div style="font-size: 14px; color: #4f46e5; line-height: 1.7; font-weight: 500;">
                        <i class="fas fa-info-circle" style="color: #6366f1; margin-right: 8px; font-size: 16px;"></i>
                        은행 선택 후 해당 은행의 인증 페이지로 이동합니다
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">출금 은행 선택</label>
                    <div class="bank-grid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px;">
                        <div class="bank-option" onclick="selectBank('KB국민')" style="padding: 13px 9px; border: 1.5px solid #e0e0e0; border-radius: 7px; text-align: center; cursor: pointer; transition: all 0.3s; background: white;">
                            <div style="width: 50px; height: 50px; margin: 0 auto 8px; background: #FFBF00; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: 700; color: white; font-size: 16px; box-shadow: inset 0 0 0 2.5px white;">KB</div>
                            <div style="font-size: 12px; font-weight: 500; color: #333;">KB국민</div>
                        </div>
                        <div class="bank-option" onclick="selectBank('신한')" style="padding: 13px 9px; border: 1.5px solid #e0e0e0; border-radius: 7px; text-align: center; cursor: pointer; transition: all 0.3s; background: white;">
                            <div style="width: 50px; height: 50px; margin: 0 auto 8px; background: #0046FF; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: 700; color: white; font-size: 14px; box-shadow: inset 0 0 0 2.5px white;">신한</div>
                            <div style="font-size: 12px; font-weight: 500; color: #333;">신한</div>
                        </div>
                        <div class="bank-option" onclick="selectBank('하나')" style="padding: 13px 9px; border: 1.5px solid #e0e0e0; border-radius: 7px; text-align: center; cursor: pointer; transition: all 0.3s; background: white;">
                            <div style="width: 50px; height: 50px; margin: 0 auto 8px; background: #008C8C; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: 700; color: white; font-size: 14px; box-shadow: inset 0 0 0 2.5px white;">하나</div>
                            <div style="font-size: 12px; font-weight: 500; color: #333;">하나</div>
                        </div>
                        <div class="bank-option" onclick="selectBank('우리')" style="padding: 13px 9px; border: 1.5px solid #e0e0e0; border-radius: 7px; text-align: center; cursor: pointer; transition: all 0.3s; background: white;">
                            <div style="width: 50px; height: 50px; margin: 0 auto 8px; background: #1665C0; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: 700; color: white; font-size: 14px; box-shadow: inset 0 0 0 2.5px white;">우리</div>
                            <div style="font-size: 12px; font-weight: 500; color: #333;">우리</div>
                        </div>
                        <div class="bank-option" onclick="selectBank('NH농협')" style="padding: 13px 9px; border: 1.5px solid #e0e0e0; border-radius: 7px; text-align: center; cursor: pointer; transition: all 0.3s; background: white;">
                            <div style="width: 50px; height: 50px; margin: 0 auto 8px; background: #00953A; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: 700; color: white; font-size: 13px; box-shadow: inset 0 0 0 2.5px white;">NH</div>
                            <div style="font-size: 12px; font-weight: 500; color: #333;">NH농협</div>
                        </div>
                        <div class="bank-option" onclick="selectBank('카카오뱅크')" style="padding: 13px 9px; border: 1.5px solid #e0e0e0; border-radius: 7px; text-align: center; cursor: pointer; transition: all 0.3s; background: white;">
                            <div style="width: 50px; height: 50px; margin: 0 auto 8px; background: #FFEB00; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: 700; color: #3C1E1E; font-size: 20px; box-shadow: inset 0 0 0 2.5px white;">K</div>
                            <div style="font-size: 12px; font-weight: 500; color: #333;">카카오뱅크</div>
                        </div>
                        <div class="bank-option" onclick="selectBank('토스뱅크')" style="padding: 13px 9px; border: 1.5px solid #e0e0e0; border-radius: 7px; text-align: center; cursor: pointer; transition: all 0.3s; background: white;">
                            <div style="width: 50px; height: 50px; margin: 0 auto 8px; background: #0064FF; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: 700; color: white; font-size: 20px; box-shadow: inset 0 0 0 2.5px white;">T</div>
                            <div style="font-size: 12px; font-weight: 500; color: #333;">토스뱅크</div>
                        </div>
                        <div class="bank-option" onclick="selectBank('케이뱅크')" style="padding: 13px 9px; border: 1.5px solid #e0e0e0; border-radius: 7px; text-align: center; cursor: pointer; transition: all 0.3s; background: white;">
                            <div style="width: 50px; height: 50px; margin: 0 auto 8px; background: linear-gradient(135deg, #667EEA 0%, #764BA2 100%); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: 700; color: white; font-size: 20px; box-shadow: inset 0 0 0 2.5px white;">K</div>
                            <div style="font-size: 12px; font-weight: 500; color: #333;">케이뱅크</div>
                        </div>
                    </div>
                </div>
            </div>

            <div style="padding: 28px 32px; background: linear-gradient(180deg, #f8f9fa 0%, #ffffff 100%); border-top: 1px solid #e9ecef;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding: 16px; background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                    <span style="font-size: 15px; color: #6b7280; font-weight: 600;">이체 금액</span>
                    <strong style="font-size: 24px; color: #6366f1; font-weight: 700;" id="transferPaymentAmount">100,000원</strong>
                </div>
                <button class="btn-payment" id="transferBtn" onclick="processTransfer()" disabled>
                    <i class="fas fa-arrow-right"></i> 은행 선택 후 이체하기
                </button>
            </div>
        </div>
    </div>

    <!-- CMS 자동이체 신청 모달 -->
    <div class="payment-modal" id="cmsModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fas fa-sync-alt"></i>
                    CMS 자동이체 신청
                </div>
                <button class="modal-close" onclick="closePaymentModal('cms')">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="modal-body">
                <div style="background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%); padding: 20px; border-radius: 12px; margin-bottom: 24px; border-left: 4px solid #10b981; box-shadow: 0 2px 10px rgba(16, 185, 129, 0.15);">
                    <div style="font-size: 16px; font-weight: 700; color: #059669; margin-bottom: 12px;">
                        <i class="fas fa-check-circle"></i> CMS 자동이체 혜택
                    </div>
                    <div style="font-size: 14px; color: #065f46; line-height: 1.8;">
                        • 매년 자동으로 회비 납부 (편리함)<br>
                        • 납부 기한 걱정 없음<br>
                        • 언제든지 해지 가능
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">은행 선택</label>
                    <select class="form-control" id="cmsBank">
                        <option value="">은행을 선택하세요</option>
                        <option value="KB국민은행">KB국민은행</option>
                        <option value="신한은행">신한은행</option>
                        <option value="하나은행">하나은행</option>
                        <option value="우리은행">우리은행</option>
                        <option value="NH농협은행">NH농협은행</option>
                        <option value="카카오뱅크">카카오뱅크</option>
                        <option value="토스뱅크">토스뱅크</option>
                        <option value="케이뱅크">케이뱅크</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">계좌번호</label>
                    <input type="text" class="form-control" id="cmsAccount" placeholder="계좌번호를 입력하세요 (숫자만)">
                </div>

                <div class="form-group">
                    <label class="form-label">예금주명</label>
                    <input type="text" class="form-control" id="cmsAccountHolder" placeholder="홍길동">
                </div>

                <div class="form-group" style="margin-bottom: 0;">
                    <label class="form-label">출금일 선택</label>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
                        <div class="date-option selected" onclick="selectWithdrawalDate(5)" style="padding: 14px; border: 2px solid #6366f1; background: linear-gradient(135deg, #eef2ff 0%, #e0e7ff 100%); border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s; font-size: 14px; font-weight: 700; color: #4f46e5; box-shadow: 0 2px 8px rgba(99, 102, 241, 0.2);">매월 5일</div>
                        <div class="date-option" onclick="selectWithdrawalDate(10)" style="padding: 14px; border: 2px solid #e5e7eb; background: white; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s; font-size: 14px; font-weight: 600; color: #6b7280;">매월 10일</div>
                        <div class="date-option" onclick="selectWithdrawalDate(15)" style="padding: 14px; border: 2px solid #e5e7eb; background: white; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s; font-size: 14px; font-weight: 600; color: #6b7280;">매월 15일</div>
                        <div class="date-option" onclick="selectWithdrawalDate(20)" style="padding: 14px; border: 2px solid #e5e7eb; background: white; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s; font-size: 14px; font-weight: 600; color: #6b7280;">매월 20일</div>
                        <div class="date-option" onclick="selectWithdrawalDate(25)" style="padding: 14px; border: 2px solid #e5e7eb; background: white; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s; font-size: 14px; font-weight: 600; color: #6b7280;">매월 25일</div>
                        <div class="date-option" onclick="selectWithdrawalDate(28)" style="padding: 14px; border: 2px solid #e5e7eb; background: white; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s; font-size: 14px; font-weight: 600; color: #6b7280;">매월 28일</div>
                    </div>
                </div>
            </div>

            <div style="padding: 28px 32px; background: linear-gradient(180deg, #f8f9fa 0%, #ffffff 100%); border-top: 1px solid #e9ecef;">
                <div style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); padding: 18px; border-radius: 12px; margin-bottom: 20px; border: 2px solid #fbbf24; box-shadow: 0 2px 10px rgba(251, 191, 36, 0.2);">
                    <div style="font-size: 13px; color: #92400e; margin-bottom: 10px; font-weight: 600;">
                        <i class="fas fa-info-circle"></i> 자동이체 금액
                    </div>
                    <div style="font-size: 20px; font-weight: 700; color: #b45309;">
                        연회비 100,000원 <span style="font-size: 14px; font-weight: 500; color: #92400e;">(매년 1회 자동 출금)</span>
                    </div>
                </div>
                
                <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; margin-bottom: 20px; padding: 16px; background: white; border-radius: 12px; border: 2px solid #e5e7eb; transition: all 0.3s;">
                    <input type="checkbox" id="cmsAgree" style="width: 20px; height: 20px; accent-color: #6366f1; cursor: pointer;">
                    <span style="font-size: 14px; color: #1f2937; font-weight: 500;">개인정보 수집 및 CMS 출금 동의 (필수)</span>
                </label>
                
                <button class="btn-payment" onclick="processCMS()">
                    <i class="fas fa-check-circle"></i> CMS 자동이체 신청하기
                </button>
            </div>
        </div>
    </div>

    <!-- 결제 인증 모달 -->
    <div class="payment-modal" id="authModal" style="z-index: 10001;">
        <div class="modal-content" style="max-width: 400px; border-radius: 16px; padding: 0; overflow: hidden;">
            <div style="background: #f5f5f5; padding: 18px 24px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #e0e0e0;">
                <div style="font-size: 14px; font-weight: 600; color: #333;">결제 수단 인증됨</div>
                <img src="https://www.gstatic.com/images/branding/product/2x/pay_48dp.png" alt="Google Pay" style="height: 20px;">
            </div>
            
            <div style="padding: 40px 30px; text-align: center; background: white;">
                <div style="margin-bottom: 16px;">
                    <div style="width: 60px; height: 60px; background: #34a853; border-radius: 50%; margin: 0 auto; display: flex; align-items: center; justify-content: center; animation: checkmarkBounce 0.5s ease-out;">
                        <i class="fas fa-check" style="font-size: 32px; color: white;"></i>
                    </div>
                </div>
                <div style="font-size: 16px; font-weight: 600; color: #333; margin-bottom: 6px;">확인됨</div>
                <div style="font-size: 13px; color: #666;">결제가 안전하게 처리되었습니다</div>
            </div>
            
            <div style="padding: 16px 24px; background: #f5f5f5; display: flex; justify-content: flex-end; gap: 10px;">
                <button onclick="closeAuthModal()" style="padding: 9px 20px; background: #1e7e34; color: white; border: none; border-radius: 18px; font-size: 13px; font-weight: 600; cursor: pointer; transition: all 0.3s;">
                    확인
                </button>
            </div>
        </div>
    </div>

    <!-- 푸터 -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <a href="../../index.html" class="logo-home-link">
                        <div class="footer-logo-badge">
                            <img src="../../images/logo.png" alt="한국ESG학회" class="footer-logo-img">
                        </div>
                    </a>
                    <p class="footer-tagline">지속가능한 미래를 위한 ESG 연구와 실천</p>
                </div>
                
                <div class="footer-info">
                    <h4>학회 정보</h4>
                    <ul class="footer-info-list">
                        <li><i class="fas fa-map-marker-alt"></i> 서울특별시 동작구 상도로 369</li>
                        <li style="padding-left: 20px;">숭실대학교 진리관 508호</li>
                        <li><i class="fas fa-phone"></i> 010-4263-7715</li>
                        <li><i class="fas fa-envelope"></i> kohmh@ssu.ac.kr</li>
                    </ul>
                </div>
                
                <div class="footer-links">
                    <h4>바로가기</h4>
                    <ul class="footer-links-list">
                        <li><a href="../about/greeting.html">학회소개</a></li>
                        <li><a href="../member/process.html">회원가입</a></li>
                        <li><a href="../journal/submission.html">논문투고</a></li>
                        <li><a href="../community/notice.html">공지사항</a></li>
                        <li><a href="../about/location.html">오시는 길</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 Korean ESG Association. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="../../js/modal.js"></script>
    <script src="../../js/main.js"></script>
    <script>
        let selectedInstallment = 0;
        let selectedBank = '';
        let selectedWithdrawalDate = 5;
        let currentPaymentAmount = 100000;

        // 결제 내역 저장 함수
        function savePaymentHistory(paymentData) {
            // 기존 결제 내역 가져오기
            const history = JSON.parse(localStorage.getItem('paymentHistory') || '[]');
            
            // 새 결제 내역 추가
            history.unshift(paymentData);
            
            // LocalStorage에 저장 (최대 50개)
            if (history.length > 50) {
                history.length = 50;
            }
            localStorage.setItem('paymentHistory', JSON.stringify(history));
            
            // 최근 결제 정보도 저장
            localStorage.setItem('lastPayment', JSON.stringify(paymentData));
        }

        // 결제 금액 업데이트
        function updatePaymentAmount() {
            const annualFee = 100000;
            const donationAmount = parseInt(document.getElementById('donationAmount').value) || 0;
            const includeDonation = document.getElementById('includeDonation').checked;

            let total = annualFee;
            if (includeDonation && donationAmount >= 10000) {
                total += donationAmount;
            }

            currentPaymentAmount = total;

            document.getElementById('annualFee').textContent = annualFee.toLocaleString() + '원';
            document.getElementById('donationFee').textContent = (includeDonation ? donationAmount : 0).toLocaleString() + '원';
            document.getElementById('totalAmount').textContent = total.toLocaleString() + '원';

            // 모달 내 금액도 업데이트
            const amountText = total.toLocaleString() + '원';
            if (document.getElementById('cardPaymentAmount')) {
                document.getElementById('cardPaymentAmount').textContent = amountText;
            }
            if (document.getElementById('transferPaymentAmount')) {
                document.getElementById('transferPaymentAmount').textContent = amountText;
            }
        }

        // 모달 열기
        function openPaymentModal(type) {
            updatePaymentAmount();
            
            if (type === 'card') {
                document.getElementById('cardModal').classList.add('active');
            } else if (type === 'transfer') {
                document.getElementById('transferModal').classList.add('active');
            } else if (type === 'cms') {
                document.getElementById('cmsModal').classList.add('active');
            }
        }

        // 모달 닫기
        function closePaymentModal(type) {
            if (type === 'card') {
                document.getElementById('cardModal').classList.remove('active');
            } else if (type === 'transfer') {
                document.getElementById('transferModal').classList.remove('active');
            } else if (type === 'cms') {
                document.getElementById('cmsModal').classList.remove('active');
            }
        }

        // 모달 외부 클릭 시 닫기
        document.querySelectorAll('.payment-modal').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                }
            });
        });

        // 카드 번호 포맷팅
        function formatCardNumber(index) {
            const input = document.getElementById('cardNum' + index);
            input.value = input.value.replace(/\D/g, '');
            
            if (input.value.length === 4 && index < 4) {
                document.getElementById('cardNum' + (index + 1)).focus();
            }

            updateCardDisplay();
        }

        // 카드 화면 업데이트
        function updateCardDisplay() {
            const num1 = document.getElementById('cardNum1').value || '••••';
            const num2 = document.getElementById('cardNum2').value || '••••';
            const num3 = document.getElementById('cardNum3').value || '••••';
            const num4 = document.getElementById('cardNum4').value || '••••';
            
            document.getElementById('cardNumberDisplay').textContent = `${num1} ${num2} ${num3} ${num4}`;
        }

        // 유효기간 포맷팅
        function formatExpiry() {
            const month = document.getElementById('cardMonth');
            const year = document.getElementById('cardYear');
            
            month.value = month.value.replace(/\D/g, '');
            year.value = year.value.replace(/\D/g, '');
            
            if (month.value.length === 2) {
                year.focus();
            }

            const displayMonth = month.value || 'MM';
            const displayYear = year.value || 'YY';
            document.getElementById('cardExpiryDisplay').textContent = `${displayMonth}/${displayYear}`;
        }

        // 카드 소유자 업데이트
        function updateCardHolder() {
            const holder = document.getElementById('cardHolder').value || 'CARD HOLDER';
            document.getElementById('cardHolderDisplay').textContent = holder.toUpperCase();
        }

        // 카드사 업데이트
        function updateCardCompany() {
            const company = document.getElementById('cardCompany').value || 'CARD';
            document.getElementById('cardCompanyDisplay').textContent = company;
        }

        // 할부 선택
        function selectInstallment(months) {
            selectedInstallment = months;
            document.querySelectorAll('.installment-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            event.target.classList.add('selected');
        }

        // 신용카드 결제 처리
        function processCardPayment() {
            const num1 = document.getElementById('cardNum1').value;
            const num2 = document.getElementById('cardNum2').value;
            const num3 = document.getElementById('cardNum3').value;
            const num4 = document.getElementById('cardNum4').value;
            const month = document.getElementById('cardMonth').value;
            const year = document.getElementById('cardYear').value;
            const cvc = document.getElementById('cardCvc').value;
            const holder = document.getElementById('cardHolder').value;
            const company = document.getElementById('cardCompany').value;

            if (!num1 || !num2 || !num3 || !num4) {
                showCustomModal('카드번호를 입력해주세요.', 'warning');
                return;
            }
            if (!month || !year) {
                showCustomModal('유효기간을 입력해주세요.', 'warning');
                return;
            }
            if (!cvc) {
                showCustomModal('CVC를 입력해주세요.', 'warning');
                return;
            }
            if (!holder) {
                showCustomModal('카드 소유자 이름을 입력해주세요.', 'warning');
                return;
            }
            if (!company) {
                showCustomModal('카드사를 선택해주세요.', 'warning');
                return;
            }

            // 결제 시뮬레이션
            const btn = event.target;
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 결제 진행 중...';

            setTimeout(() => {
                // 카드 모달 닫기
                closePaymentModal('card');
                
                // 인증 모달 표시
                showAuthModal();
                
                // 결제 데이터 생성 및 저장
                const paymentData = {
                    orderId: 'KESG' + Date.now(),
                    date: new Date().toISOString(),
                    method: 'card',
                    cardCompany: company,
                    cardNumber: num1 + '-****-****-' + num4,
                    installment: selectedInstallment,
                    item: '2025년 정회원 연회비',
                    amount: currentPaymentAmount,
                    status: 'completed'
                };

                // LocalStorage에 결제 내역 저장
                savePaymentHistory(paymentData);
                
                // 2초 후 결제 완료 페이지로 이동
                setTimeout(() => {
                    const dataStr = encodeURIComponent(JSON.stringify(paymentData));
                    window.location.href = 'payment-success.html?data=' + dataStr;
                }, 2000);
            }, 2000);
        }

        // 은행 선택
        function selectBank(bankName) {
            selectedBank = bankName;
            document.querySelectorAll('.bank-option').forEach(opt => {
                opt.style.borderColor = '#e0e0e0';
                opt.style.background = 'white';
                opt.classList.remove('selected');
            });
            const selectedOpt = event.target.closest('.bank-option');
            selectedOpt.style.borderColor = '#1e7e34';
            selectedOpt.style.background = '#e8f5e9';
            selectedOpt.classList.add('selected');
            
            document.getElementById('transferBtn').disabled = false;
            document.getElementById('transferBtn').innerHTML = '<i class="fas fa-arrow-right"></i> ' + bankName + '으로 이체하기';
        }

        // 계좌이체 처리
        function processTransfer() {
            if (!selectedBank) {
                showCustomModal('은행을 선택해주세요.', 'warning');
                return;
            }

            const btn = event.target;
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 이체 진행 중...';

            setTimeout(() => {
                // 계좌이체 모달 닫기
                closePaymentModal('transfer');
                
                // 인증 모달 표시
                showAuthModal();
                
                // 결제 데이터 생성
                const paymentData = {
                    orderId: 'KESG' + Date.now(),
                    date: new Date().toISOString(),
                    method: 'transfer',
                    bank: selectedBank,
                    item: '2025년 정회원 연회비',
                    amount: currentPaymentAmount,
                    status: 'completed'
                };

                // LocalStorage에 결제 내역 저장
                savePaymentHistory(paymentData);
                
                // 2초 후 결제 완료 페이지로 이동
                setTimeout(() => {
                    const dataStr = encodeURIComponent(JSON.stringify(paymentData));
                    window.location.href = 'payment-success.html?data=' + dataStr;
                }, 2000);
            }, 1500);
        }

        // 출금일 선택
        function selectWithdrawalDate(date) {
            selectedWithdrawalDate = date;
            document.querySelectorAll('.date-option').forEach(opt => {
                opt.style.borderColor = '#e0e0e0';
                opt.style.background = 'white';
                opt.style.fontWeight = '400';
                opt.style.color = '#333';
                opt.classList.remove('selected');
            });
            event.target.style.borderColor = '#1e7e34';
            event.target.style.background = '#e8f5e9';
            event.target.style.fontWeight = '600';
            event.target.style.color = '#1e7e34';
            event.target.classList.add('selected');
        }

        // CMS 신청 처리
        function processCMS() {
            const bank = document.getElementById('cmsBank').value;
            const account = document.getElementById('cmsAccount').value;
            const holder = document.getElementById('cmsAccountHolder').value;
            const agree = document.getElementById('cmsAgree').checked;

            if (!bank) {
                showCustomModal('은행을 선택해주세요.', 'warning');
                return;
            }
            if (!account) {
                showCustomModal('계좌번호를 입력해주세요.', 'warning');
                return;
            }
            if (!holder) {
                showCustomModal('예금주명을 입력해주세요.', 'warning');
                return;
            }
            if (!agree) {
                showCustomModal('개인정보 수집 및 CMS 출금 동의에 체크해주세요.', 'warning');
                return;
            }

            const btn = event.target;
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 신청 진행 중...';

            setTimeout(() => {
                // CMS 모달 닫기
                closePaymentModal('cms');
                
                // 인증 모달 표시
                showAuthModal();
                
                // 결제 데이터 생성
                const paymentData = {
                    orderId: 'KESG' + Date.now(),
                    date: new Date().toISOString(),
                    method: 'cms',
                    bank: bank,
                    account: account.substring(0, 4) + '****' + account.substring(account.length - 4),
                    holder: holder,
                    withdrawalDate: selectedWithdrawalDate,
                    item: '2025년 정회원 연회비 (자동이체)',
                    amount: 100000,
                    status: 'completed'
                };

                // LocalStorage에 결제 내역 저장
                savePaymentHistory(paymentData);
                
                // 2초 후 결제 완료 페이지로 이동
                setTimeout(() => {
                    const dataStr = encodeURIComponent(JSON.stringify(paymentData));
                    window.location.href = 'payment-success.html?data=' + dataStr;
                }, 2000);
            }, 1500);
        }

        // 인증 모달 표시
        function showAuthModal() {
            document.getElementById('authModal').classList.add('active');
        }

        // 인증 모달 닫기
        function closeAuthModal() {
            document.getElementById('authModal').classList.remove('active');
        }
    </script>
</body>
</html>
